# SPDX-License-Identifier: GPL-2.0
obj-$(CONFIG_HOTPLUG_CPU)		+= cpu_hotplug.o
obj-y	+= grant-table.o features.o balloon.o manage.o time.o
obj-y	+= mem-reservation.o
obj-y	+= events/
obj-y	+= xenbus/

CFLAGS_features.o			:= -fno-stack-protector

dom0-$(CONFIG_ARM64) += arm-device.o
dom0-$(CONFIG_PCI) += pci.o
dom0-$(CONFIG_USB_SUPPORT) += dbgp.o
dom0-$(CONFIG_XEN_ACPI) += acpi.o $(xen-pad-y)
xen-pad-$(CONFIG_X86) += xen-acpi-pad.o
dom0-$(CONFIG_X86) += pcpu.o
obj-$(CONFIG_XEN_DOM0)			+= $(dom0-y)
obj-$(CONFIG_BLOCK)			+= biomerge.o
obj-$(CONFIG_XEN_BALLOON)		+= xen-balloon.o
obj-$(CONFIG_XEN_DEV_EVTCHN)		+= xen-evtchn.o
obj-$(CONFIG_XEN_GNTDEV)		+= xen-gntdev.o
obj-$(CONFIG_XEN_GRANT_DEV_ALLOC)	+= xen-gntalloc.o
obj-$(CONFIG_XENFS)			+= xenfs/
obj-$(CONFIG_XEN_SYS_HYPERVISOR)	+= sys-hypervisor.o
obj-$(CONFIG_XEN_PVHVM_GUEST)		+= platform-pci.o
obj-$(CONFIG_SWIOTLB_XEN)		+= swiotlb-xen.o
obj-$(CONFIG_XEN_MCE_LOG)		+= mcelog.o
obj-$(CONFIG_XEN_PCIDEV_BACKEND)	+= xen-pciback/
obj-$(CONFIG_XEN_PRIVCMD)		+= xen-privcmd.o
obj-$(CONFIG_XEN_ACPI_PROCESSOR)	+= xen-acpi-processor.o
obj-$(CONFIG_XEN_EFI)			+= efi.o
obj-$(CONFIG_XEN_SCSI_BACKEND)		+= xen-scsiback.o
obj-$(CONFIG_XEN_AUTO_XLATE)		+= xlate_mmu.o
obj-$(CONFIG_XEN_PVCALLS_BACKEND)	+= pvcalls-back.o
obj-$(CONFIG_XEN_PVCALLS_FRONTEND)	+= pvcalls-front.o
xen-evtchn-y				:= evtchn.o
xen-gntdev-y				:= gntdev.o
xen-gntdev-$(CONFIG_XEN_GNTDEV_DMABUF)	+= gntdev-dmabuf.o
xen-gntalloc-y				:= gntalloc.o
xen-privcmd-y				:= privcmd.o privcmd-buf.o
obj-$(CONFIG_XEN_FRONT_PGDIR_SHBUF)	+= xen-front-pgdir-shbuf.o
obj-$(CONFIG_XEN_UNPOPULATED_ALLOC)	+= unpopulated-alloc.o
